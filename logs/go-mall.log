{"level":"info","ts":"2025-02-11T17:16:23.893+0800","msg":"test for zap init","app":{"Name":"go-mall","Env":"dev","Log":{"FilePath":"logs/go-mall.log","FileMaxSize":100,"BackUpFileMaxAge":60}},"database":{"Type":"mysql","DSN":"reserved","MaxOpenConn":100,"MaxIdleConn":10,"MaxLifeTime":300000000000},"data":"快乐池塘栽种了梦想就变成海洋\n鼓的眼睛大嘴巴同样唱的响亮\n借我一双小翅膀就能飞向太阳\n我相信奇迹就在身上\n啦......\n有你相伴 leap frog\n啦......\n自信成长有你相伴 leap frog\n快乐的一只小青蛙 leap frog\n快乐的一只小青蛙 leap frog\n(rap)快乐的池塘里面有只小青蛙\n它跳起舞来就像被王子附体了\n酷酷的眼神,没有哪只青蛙能比美\n总有一天它会被公主唤醒了"}
{"level":"info","ts":"2025-02-11T17:31:21.832+0800","msg":"logger test","key":"keyName","val":2,"traceid":"9d61dae97027c982","spanid":"9d61dae97027c982","pspanid":"","func":"main.main.func3","file":"main.go","line":32}
{"level":"info","ts":"2025-02-11T17:41:47.539+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"ee744f7151f75253","spanid":"ee744f7151f75253","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:41:47.553+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":"","time(ms)":14,"traceid":"ee744f7151f75253","spanid":"ee744f7151f75253","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:41:49.700+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"6d4a890d3d29d6f7","spanid":"6d4a890d3d29d6f7","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:41:49.700+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":"","time(ms)":0,"traceid":"6d4a890d3d29d6f7","spanid":"6d4a890d3d29d6f7","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:42:23.094+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"a7b3110d0455e595","spanid":"a7b3110d0455e595","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:42:23.105+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":"","time(ms)":11,"traceid":"a7b3110d0455e595","spanid":"a7b3110d0455e595","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:42:24.100+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"6bb279a51641a125","spanid":"6bb279a51641a125","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:42:24.100+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":"","time(ms)":0,"traceid":"6bb279a51641a125","spanid":"6bb279a51641a125","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:43:30.720+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"/panic-log-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"e88a135134138c89","spanid":"e88a135134138c89","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"error","ts":"2025-02-11T17:43:30.720+0800","msg":"http_request_panic","path":"/panic-log-test","error":"assignment to entry in nil map","request":"GET /panic-log-test HTTP/1.1\r\nHost: 127.0.0.1:8080\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\r\nAccept-Encoding: gzip, deflate, br, zstd\r\nAccept-Language: zh-CN,zh;q=0.9\r\nConnection: keep-alive\r\nSec-Ch-Ua: \"Not(A:Brand\";v=\"99\", \"Google Chrome\";v=\"133\", \"Chromium\";v=\"133\"\r\nSec-Ch-Ua-Mobile: ?0\r\nSec-Ch-Ua-Platform: \"Windows\"\r\nSec-Fetch-Dest: document\r\nSec-Fetch-Mode: navigate\r\nSec-Fetch-Site: none\r\nSec-Fetch-User: ?1\r\nUpgrade-Insecure-Requests: 1\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36\r\n\r\n","stack":"goroutine 21 [running]:\nruntime/debug.Stack()\n\tC:/Program Files/Go/src/runtime/debug/stack.go:24 +0x5e\nmain.main.GinPanicRecovery.func8.1()\n\td:/codebase/go/src/github.com/go-mall/common/middleware/infrastructure.go:124 +0x285\npanic({0xf54ec0?, 0x10a1010?})\n\tC:/Program Files/Go/src/runtime/panic.go:770 +0x132\nmain.main.func5(0xc0000be000)\n\td:/codebase/go/src/github.com/go-mall/main.go:48 +0x31\ngithub.com/gin-gonic/gin.(*Context).Next(0xc0000be000)\n\tC:/Users/admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0x2b\nmain.main.GinPanicRecovery.func8(0xf314c0?)\n\td:/codebase/go/src/github.com/go-mall/common/middleware/infrastructure.go:129 +0x45\ngithub.com/gin-gonic/gin.(*Context).Next(0xc0000be000)\n\tC:/Users/admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0x2b\nmain.main.LogAccess.func7(0xc0000be000)\n\td:/codebase/go/src/github.com/go-mall/common/middleware/infrastructure.go:74 +0x25a\ngithub.com/gin-gonic/gin.(*Context).Next(0xc0000be000)\n\tC:/Users/admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185 +0x2b\nmain.main.StartTrace.func6(0xc0000be000)\n\td:/codebase/go/src/github.com/go-mall/common/middleware/infrastructure.go:32 +0x13e\ngithub.com/gin-gonic/gin.(*Context).Next(...)\n\tC:/Users/admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0001411e0, 0xc0000be000)\n\tC:/Users/admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x892\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0001411e0, {0x10a5d70, 0xc0000b8620}, 0xc00020e120)\n\tC:/Users/admin/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x1b2\nnet/http.serverHandler.ServeHTTP({0xc0002020f0?}, {0x10a5d70?, 0xc0000b8620?}, 0x6?)\n\tC:/Program Files/Go/src/net/http/server.go:3137 +0x8e\nnet/http.(*conn).serve(0xc00009e1b0, {0x10a6808, 0xc000192870})\n\tC:/Program Files/Go/src/net/http/server.go:2039 +0x5e8\ncreated by net/http.(*Server).Serve in goroutine 1\n\tC:/Program Files/Go/src/net/http/server.go:3285 +0x4b4\n","traceid":"e88a135134138c89","spanid":"e88a135134138c89","pspanid":"","func":"main.main.GinPanicRecovery.func8.1","file":"infrastructure.go","line":124}
{"level":"info","ts":"2025-02-11T17:43:30.720+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"/panic-log-test","query":"","body":"","output":"","time(ms)":0,"traceid":"e88a135134138c89","spanid":"e88a135134138c89","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:45:19.476+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"96e7bb0d1211a147","spanid":"96e7bb0d1211a147","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:45:19.487+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":"","time(ms)":10,"traceid":"96e7bb0d1211a147","spanid":"96e7bb0d1211a147","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:45:29.344+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"491adb4d641edbf0","spanid":"491adb4d641edbf0","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:45:29.344+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"/access-log-test","query":"","body":"","output":"","time(ms)":0,"traceid":"491adb4d641edbf0","spanid":"491adb4d641edbf0","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:45:43.585+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"//logger-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"f9e2e59507032e03","spanid":"f9e2e59507032e03","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:45:43.585+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"//logger-test","query":"","body":"","output":"","time(ms)":0,"traceid":"f9e2e59507032e03","spanid":"f9e2e59507032e03","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:45:47.016+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"/logger-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"2c6b124500769baa","spanid":"2c6b124500769baa","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:45:47.016+0800","msg":"logger test","key":"keyName","val":2,"traceid":"2c6b124500769baa","spanid":"2c6b124500769baa","pspanid":"","func":"main.main.func3","file":"main.go","line":34}
{"level":"info","ts":"2025-02-11T17:45:47.016+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"/logger-test","query":"","body":"","output":"{\"status\":\"ok\"}","time(ms)":0,"traceid":"2c6b124500769baa","spanid":"2c6b124500769baa","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"info","ts":"2025-02-11T17:52:43.083+0800","msg":"AccessLog","type":"access_start","ip":"127.0.0.1","method":"GET","path":"/customized-error-test","query":"","body":"","output":null,"time(ms)":0,"traceid":"4df8333d57f1671a","spanid":"4df8333d57f1671a","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
{"level":"error","ts":"2025-02-11T17:52:43.096+0800","msg":"记录错误","err":"{\"code\":-1,\"msg\":\"再包装错误\",\"cause\":\"{\\\"code\\\":-1,\\\"msg\\\":\\\"包装错误\\\",\\\"cause\\\":\\\"a dao error\\\",\\\"occurred\\\":\\\"func: main.main.func6, file: main.go, line: 61\\\"}\",\"occurred\":\"func: main.main.func6, file: main.go, line: 62\"}","traceid":"4df8333d57f1671a","spanid":"4df8333d57f1671a","pspanid":"","func":"main.main.func6","file":"main.go","line":63}
{"level":"error","ts":"2025-02-11T17:52:43.096+0800","msg":"API执行中出现错误","err":"{\"code\":10000000,\"msg\":\"服务器内部错误\",\"cause\":\"a domain error\",\"occurred\":\"func: main.main.func6, file: main.go, line: 67\"}","traceid":"4df8333d57f1671a","spanid":"4df8333d57f1671a","pspanid":"","func":"main.main.func6","file":"main.go","line":68}
{"level":"info","ts":"2025-02-11T17:52:43.096+0800","msg":"AccessLog","type":"access_end","ip":"127.0.0.1","method":"GET","path":"/customized-error-test","query":"","body":"","output":"{\"code\":10000000,\"msg\":\"服务器内部错误\"}","time(ms)":12,"traceid":"4df8333d57f1671a","spanid":"4df8333d57f1671a","pspanid":"","func":"github.com/go-mall/common/middleware.accessLog","file":"infrastructure.go","line":87}
